<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 101 | @kyungyunlee&#39;s notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/TIL/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <meta name="description" content="My Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.e7d1670b.css" as="style"><link rel="preload" href="/TIL/assets/js/app.789decad.js" as="script"><link rel="preload" href="/TIL/assets/js/2.18ead24d.js" as="script"><link rel="preload" href="/TIL/assets/js/14.d9f2dd43.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.85f47ba8.js"><link rel="prefetch" href="/TIL/assets/js/11.6783b171.js"><link rel="prefetch" href="/TIL/assets/js/12.853e920c.js"><link rel="prefetch" href="/TIL/assets/js/13.4ca6c885.js"><link rel="prefetch" href="/TIL/assets/js/15.473f94ec.js"><link rel="prefetch" href="/TIL/assets/js/16.a0fff622.js"><link rel="prefetch" href="/TIL/assets/js/17.1142aa4e.js"><link rel="prefetch" href="/TIL/assets/js/18.b5da5ca9.js"><link rel="prefetch" href="/TIL/assets/js/19.2e345ac8.js"><link rel="prefetch" href="/TIL/assets/js/20.77136eb2.js"><link rel="prefetch" href="/TIL/assets/js/21.2dae83f8.js"><link rel="prefetch" href="/TIL/assets/js/22.3e7edd83.js"><link rel="prefetch" href="/TIL/assets/js/23.f09a0fff.js"><link rel="prefetch" href="/TIL/assets/js/3.d96adee9.js"><link rel="prefetch" href="/TIL/assets/js/4.1189c722.js"><link rel="prefetch" href="/TIL/assets/js/5.4a715a46.js"><link rel="prefetch" href="/TIL/assets/js/6.40ee570f.js"><link rel="prefetch" href="/TIL/assets/js/7.5937946b.js"><link rel="prefetch" href="/TIL/assets/js/8.c1c83e0f.js"><link rel="prefetch" href="/TIL/assets/js/9.2d3bdf0d.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.e7d1670b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">@kyungyunlee's notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/kyungyunlee/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://kyungyunlee.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/kyungyunlee/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://kyungyunlee.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Monthly I Learned</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Engineering</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DS and Algorithms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/TIL/Books/" class="sidebar-link">Books</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ETC</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/ETC/docker101.html" aria-current="page" class="active sidebar-link">Docker 101</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-101"><a href="#docker-101" class="header-anchor">#</a> Docker 101</h1> <p><strong>2021.04.04</strong></p> <p><img src="https://tva1.sinaimg.cn/large/008eGmZEgy1gp7rj1mt9sj309c07zweh.jpg" alt="0_TZfTsYARaJupeCTP"></p> <h3 id="what-is-a-docker"><a href="#what-is-a-docker" class="header-anchor">#</a> What is a docker?</h3> <p>Docker is a platform that makes it easy to develop, ship and run applications on different machines. We have all gone through missing library errors and version incompatibility issues when trying to run some program. Docker alleviates these problems by building &quot;containers&quot; that can contain all the necessary resources to support the application's runtime environment.</p> <h3 id="main-idea-of-docker-containers"><a href="#main-idea-of-docker-containers" class="header-anchor">#</a> Main idea of docker : containers</h3> <p>Docker provides OS-level virtualization through containers.</p> <p>It is always compared to virtual machines (VMs), since they both allow multiple applications to be run on the same machine.</p> <p>However, the main difference between containers and VMs is the presence of OS.</p> <p>Each VM has its own OS. This is what makes it possible to install windows and ubuntu on your macbook.</p> <p>On the other hand, containers on the same machine share the same host OS and each of them only contains its application's necessary binaries and libraries.</p> <p>This is why containers are called &quot;os-level&quot; virtualization. Each container is tricked to thinking that it is using the host machine's OS all on its own, when in fact, there are other containers who are sharing it.</p> <p>A container is an isolated environment and therefore, does have its own namespace (ex. mount points, PIDs, etc).</p> <p><img src="https://tva1.sinaimg.cn/large/008eGmZEgy1gp7pz2aed4j30fn088t8q.jpg" alt="pasted image 0"></p> <p>img src: https://www.aquasec.com/cloud-native-academy/docker-container/</p> <h3 id="pros-and-cons-of-containers-and-vms"><a href="#pros-and-cons-of-containers-and-vms" class="header-anchor">#</a> Pros and cons of containers and VMs</h3> <p>Containers are</p> <ul><li>lighter and more portable
<ul><li>Many resources are shared among containers (like OS), so it takes up less space</li></ul></li> <li>Highly scalable through container orchestration
<ul><li>Can use multiple containers at the same time</li> <li>Docker compose, Docker swarm, Kubernetes</li></ul></li></ul> <p>Meanwhile, VMs are</p> <ul><li><p>more secure since it has its own OS and shares less resources with another VM.</p></li> <li><p>able to run any type of OS</p></li></ul> <h3 id="how-does-docker-work"><a href="#how-does-docker-work" class="header-anchor">#</a> How does docker work?</h3> <p>If you want to use docker, you need to first install the docker engine on a machine.</p> <p>This docker engine will act like a manager for all of your containers, managing system resources by communicating with the host kernel. I guess you can think of docker engine similar to the  type-2 hypervisors in VMs.</p> <p>Docker uses client-server architecture, in which the docker client (you) communicates with the docker daemon through docker API.</p> <p>Docker is composed of the following components</p> <ul><li>docker client</li> <li>docker daemon : manages images and containers</li> <li>docker images : instruction for how to create the container. It is built using Dockerfile.</li> <li>docker containers : the runnable instance of the docker image.</li> <li>docker registry : storage for container images. There is a public one and also you can have a private one.</li></ul> <img src="https://tva1.sinaimg.cn/large/008eGmZEgy1gp7r70uvk4j30l10b00tj.jpg" alt="architecture-01" style="zoom:67%;"> <p>img src: https://docs.docker.com/get-started/overview/</p> <h3 id="container-isolation"><a href="#container-isolation" class="header-anchor">#</a> Container isolation</h3> <p>A container is an isolated environment, so it does not aware of other containers and the host OS.</p> <p>Docker achieves this isolation by giving each docker its own namespace and limiting system resources through cgroups.</p> <p>Each container has its own namespace and it has access to its namespace only. Cgroups will limit each container to certain amount of resources like CPU and memory.</p> <p>Namespaces include</p> <ul><li>PID</li> <li>Mount</li> <li>IPC</li> <li>User</li> <li>Network</li></ul> <p>Cgroups</p> <ul><li>CPU</li> <li>memory</li> <li>network bandwidth</li> <li>disk</li> <li>priority</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker run -d --cpus=1 --m=10G
</code></pre></div><h3 id="managing-multiple-containers"><a href="#managing-multiple-containers" class="header-anchor">#</a> Managing multiple containers</h3> <ul><li>Docker compose (single machine)</li></ul> <p>When your service consists of multiple containers (like in microservices), you can organize and run multiple containers together.</p> <ul><li>Docker swarm (multiple machines)</li></ul> <p>When your service uses multiple clusters, containers on those clusters must work together.</p> <ul><li>Kubernetes (multiple machines)</li></ul> <p>Google's container orchestration system.</p> <p>Docker is written in go!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/Books/" class="prev">
        Books
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.789decad.js" defer></script><script src="/TIL/assets/js/2.18ead24d.js" defer></script><script src="/TIL/assets/js/14.d9f2dd43.js" defer></script>
  </body>
</html>
